(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users_Rights_Roles"],{"057f":function(e,t,r){var a=r("fc6a"),s=r("241c").f,o={}.toString,n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(e){try{return s(e)}catch(t){return n.slice()}};e.exports.f=function(e){return n&&"[object Window]"==o.call(e)?i(e):s(a(e))}},"18c4":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/users"}}},[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-input",{attrs:{placeholder:"搜索用户","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.getUsersList},model:{value:e.pageList.query,callback:function(t){e.$set(e.pageList,"query",t)},expression:"pageList.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUsersList},slot:"append"})],1)],1),r("el-col",{attrs:{span:8}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-user"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("新增用户")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index",label:"序号"}}),r("el-table-column",{attrs:{prop:"username",label:"用户名"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱地址"}}),r("el-table-column",{attrs:{prop:"mobile",label:"联系电话"}}),r("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),r("el-table-column",{attrs:{label:"激活状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.userActive(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.editorDialog(t.row.id)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.delUser(t.row.id)}}},[e._v("删除")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.setUserRoleDialog(t.row)}}},[e._v("分配角色")])]}}])})],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addClose}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addUserForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-user"},model:{value:e.addUserForm.username,callback:function(t){e.$set(e.addUserForm,"username",t)},expression:"addUserForm.username"}})],1),r("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1),r("el-form-item",{attrs:{label:"重复密码",prop:"checkPass"}},[r("el-input",{attrs:{placeholder:"请再次输入密码","show-password":""},model:{value:e.addUserForm.checkPass,callback:function(t){e.$set(e.addUserForm,"checkPass",t)},expression:"addUserForm.checkPass"}})],1),r("el-form-item",{attrs:{label:"用户邮箱",prop:"email"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-s-comment"},model:{value:e.addUserForm.email,callback:function(t){e.$set(e.addUserForm,"email",t)},expression:"addUserForm.email"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-phone-outline"},model:{value:e.addUserForm.mobile,callback:function(t){e.$set(e.addUserForm,"mobile",t)},expression:"addUserForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.addClose}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑用户",visible:e.editorDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editorDialogVisible=t},close:e.editorClose}},[r("el-form",{ref:"editorFormRef",attrs:{model:e.editorUserForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-user",disabled:!0},model:{value:e.editorUserForm.username,callback:function(t){e.$set(e.editorUserForm,"username",t)},expression:"editorUserForm.username"}})],1),r("el-form-item",{attrs:{label:"用户邮箱",prop:"email"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-s-comment"},model:{value:e.editorUserForm.email,callback:function(t){e.$set(e.editorUserForm,"email",t)},expression:"editorUserForm.email"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-phone-outline"},model:{value:e.editorUserForm.mobile,callback:function(t){e.$set(e.editorUserForm,"mobile",t)},expression:"editorUserForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.editorClose}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editorUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配用户权限",visible:e.setUserRoleDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setUserRoleDialogVisible=t},close:e.setRoleClose}},[r("div",[r("p",[e._v("当前用户: "+e._s(e.setRoleUserInfo.username))]),r("p",[e._v("当前角色: "+e._s(e.setRoleUserInfo.role_name))]),r("p",[e._v("分配新角色 "),r("el-select",{attrs:{placeholder:"请选择新角色"},model:{value:e.userRoles,callback:function(t){e.userRoles=t},expression:"userRoles"}},e._l(e.rolesList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.setRoleClose}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v("确 定")])],1)]),r("el-pagination",{attrs:{"current-page":e.pageList.pagenum,"page-sizes":[10,5,3,1],"page-size":e.pageList.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},s=[],o=(r("99af"),r("96cf"),r("1da1")),n={data:function(){var e=this,t=function(t,r,a){""===r?a(new Error("请输入密码")):(""!==e.addUserForm.checkPass&&e.$refs.addFormRef.validateField("checkPass"),a())},r=function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.addUserForm.password?a(new Error("两次输入密码不一致!")):a()},a=function(e,t,r){var a=/^(13[0-9]|14[01456879]|15[0-3,5-9]|16[2567]|17[0-8]|18[0-9]|19[0-3,5-9])\d{8}$/;""===t?r(new Error("手机号不能为空")):a.test(t)?r():r(new Error("请输入正确的手机号码!"))};return{total:0,pageList:{query:"",pagenum:1,pagesize:5},users:[],addDialogVisible:!1,editorDialogVisible:!1,setUserRoleDialogVisible:!1,addUserForm:{username:"",password:"",checkPass:"",email:"",mobile:""},editorUserForm:{},setUserForm:{},rolesList:[],userRoles:"",setRoleUserInfo:{},addFormRules:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码"},{validator:t,trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],checkPass:[{required:!0,message:"请再次输入密码"},{validator:r,trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],mobile:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{validator:a,trigger:"blur"}]}}},created:function(){this.getUsersList()},methods:{getUsersList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("users",{params:e.pageList});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 6:e.total=a.data.total,e.users=a.data.users;case 8:case"end":return t.stop()}}),t)})))()},userActive:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.put("/users/".concat(e.id,"/state/").concat(e.mg_state));case 2:if(a=r.sent,s=a.data,200===s.meta.status){r.next=6;break}return r.abrupt("return",t.$message.error(s.meta.msg));case 6:t.$message.success(s.meta.msg);case 7:case"end":return r.stop()}}),r)})))()},addUser:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("请输入合法的用户信息！！"));case 2:return t.next=4,e.$http.post("users",e.addUserForm);case 4:if(a=t.sent,s=a.data,201===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 8:e.$message.success(s.meta.msg),e.addDialogVisible=!1,e.getUsersList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},addClose:function(){this.$refs.addFormRef.resetFields(),this.addDialogVisible=!1},editorClose:function(){this.$refs.editorFormRef.resetFields(),this.editorDialogVisible=!1},setRoleClose:function(){this.setUserRoleDialogVisible=!1},handleSizeChange:function(e){this.pageList.pagesize=e,this.getUsersList()},handleCurrentChange:function(e){this.pageList.pagenum=e,this.getUsersList()},editorDialog:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editorDialogVisible=!0,r.next=3,t.$http.get("users/".concat(e));case 3:if(a=r.sent,s=a.data,200===s.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error(s.meta.msg));case 7:t.editorUserForm=s.data;case 8:case"end":return r.stop()}}),r)})))()},editorUser:function(){var e=this;this.$refs.editorFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("请输入合法的用户信息！！"));case 2:return t.next=4,e.$http.put("users/".concat(e.editorUserForm.id),e.editorUserForm);case 4:if(a=t.sent,s=a.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 8:e.$message.success(s.meta.msg),e.editorDialogVisible=!1,e.getUsersList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},delUser:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("users/".concat(e));case 2:if(a=r.sent,s=a.data,200===s.meta.status){r.next=6;break}return r.abrupt("return",t.$message.error(s.meta.msg));case 6:t.$message.success(s.meta.msg),o=Math.ceil((t.total-1)/t.pageList.pagesize),t.pageList.pagenum=t.pageList.pagenum>o?o:t.pageList.pagenum,t.pageList.pagenum=t.pageList.pagenum<1?1:t.pageList.pagenum,t.getUsersList();case 11:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},setUserRoleDialog:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.setUserRoleDialogVisible=!0,t.setRoleUserInfo=e,r.next=4,t.$http.get("roles");case 4:if(a=r.sent,s=a.data,200===s.meta.status){r.next=8;break}return r.abrupt("return",t.$message.error(s.meta.msg));case 8:t.rolesList=s.data;case 9:case"end":return r.stop()}}),r)})))()},setRole:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("users/".concat(e.setRoleUserInfo.id,"/role/"),{rid:e.userRoles});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 6:e.$message.success(a.meta.msg),e.userRoles="",e.getUsersList(),e.setUserRoleDialogVisible=!1;case 10:case"end":return t.stop()}}),t)})))()}}},i=n,l=r("2877"),c=Object(l["a"])(i,a,s,!1,null,null,null);t["default"]=c.exports},"25f0":function(e,t,r){"use strict";var a=r("6eeb"),s=r("825a"),o=r("d039"),n=r("ad6d"),i="toString",l=RegExp.prototype,c=l[i],u=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=i;(u||d)&&a(RegExp.prototype,i,(function(){var e=s(this),t=String(e.source),r=e.flags,a=String(void 0===r&&e instanceof RegExp&&!("flags"in l)?n.call(e):r);return"/"+t+"/"+a}),{unsafe:!0})},2909:function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function s(e){if(Array.isArray(e))return a(e)}r.d(t,"a",(function(){return l}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}r("fb6a"),r("b0c0"),r("25f0");function n(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return s(e)||o(e)||n(e)||i()}},3024:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/roles"}}},[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("角色列表")])],1),r("el-card",[r("el-row",[r("el-button",{attrs:{type:"primary",icon:"el-icon-user"},on:{click:function(t){e.addRoleDialogVisible=!0}}},[e._v("添加角色")])],1),r("el-table",{staticClass:"rolesList",staticStyle:{width:"100%"},attrs:{data:e.rolesList,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"expand",label:"展开显示",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(a,s){return r("el-row",{key:a.id,class:["bdbottom","vcenter",0===s?"bdtop":""]},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{type:"",closable:""},on:{close:function(r){return e.removeRights(a.id,t.row)}}},[e._v(" "+e._s(a.authName)+" ")])],1),r("el-col",{attrs:{span:19}},e._l(a.children,(function(a,s){return r("el-row",{key:a.id,class:0===s?"vcenter":"bdtop vcenter"},[r("el-col",{attrs:{span:6}},[r("el-tag",{attrs:{type:"success",closable:""},on:{close:function(r){return e.removeRights(a.id,t.row)}}},[e._v(" "+e._s(a.authName)+" ")])],1),r("el-col",{attrs:{span:18}},e._l(a.children,(function(a){return r("el-tag",{key:a.id,attrs:{type:"warning",closable:""},on:{close:function(r){return e.removeRights(a.id,t.row)}}},[e._v(" "+e._s(a.authName)+" ")])})),1)],1)})),1)],1)}))}}])}),r("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),r("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),r("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.editorRoleDialog(t.row.id)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.delRole(t.row.id)}}},[e._v("删除")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.setRightsDialog(t.row)}}},[e._v("分配权限")])]}}])})],1),r("el-dialog",{attrs:{title:"分配角色权限",visible:e.setRightsDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setRightsDialogVisible=t},close:e.setRightsClose}},[r("el-tree",{ref:"setRightsTreeRef",attrs:{data:e.setRightsList,"show-checkbox":"","default-expand-all":"","node-key":"id","default-checked-keys":e.defKeys,"highlight-current":"",props:e.defaultProps}}),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.setRightsClose}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setRights()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"添加角色",visible:e.addRoleDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addRoleDialogVisible=t},close:e.addRoleClose}},[r("el-form",{ref:"addRoleFormRef",attrs:{model:e.addRoleForm,rules:e.addRoleFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-user"},model:{value:e.addRoleForm.roleName,callback:function(t){e.$set(e.addRoleForm,"roleName",t)},expression:"addRoleForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{attrs:{placeholder:"请输入角色描述信息"},model:{value:e.addRoleForm.roleDesc,callback:function(t){e.$set(e.addRoleForm,"roleDesc",t)},expression:"addRoleForm.roleDesc"}})],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.addRoleClose}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑角色",visible:e.editorRoleDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editorRoleDialogVisible=t},close:e.editorRoleClose}},[r("el-form",{ref:"editorRoleFormRef",attrs:{model:e.editorRoleForm,rules:e.addRoleFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-user"},model:{value:e.editorRoleForm.roleName,callback:function(t){e.$set(e.editorRoleForm,"roleName",t)},expression:"editorRoleForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-s-comment"},model:{value:e.editorRoleForm.roleDesc,callback:function(t){e.$set(e.editorRoleForm,"roleDesc",t)},expression:"editorRoleForm.roleDesc"}})],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.editorRoleClose}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editorRole}},[e._v("确 定")])],1)],1)],1)],1)])},s=[],o=(r("99af"),r("4160"),r("a15b"),r("159b"),r("2909")),n=(r("96cf"),r("1da1")),i={data:function(){return{rolesList:[],setRightsList:[],addRoleForm:{},editorRoleForm:{},defaultProps:{children:"children",label:"authName"},defKeys:[],rolesId:"",setRightsDialogVisible:!1,addRoleDialogVisible:!1,editorRoleDialogVisible:!1,addRoleFormRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:3,max:8,message:"长度在 6 到 20 个字符",trigger:"blur"}]}}},created:function(){this.getRolesList()},methods:{getRolesList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("roles");case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 6:e.rolesList=a.data;case 7:case"end":return t.stop()}}),t)})))()},removeRights:function(e,t){var r=this;this.$confirm("此操作将删除该角色的对应权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function a(){var s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.$http.delete("roles/".concat(t.id,"/rights/").concat(e));case 2:if(s=a.sent,o=s.data,200===o.meta.status){a.next=6;break}return a.abrupt("return",r.$messgae.error(o.meta.msg));case 6:r.$message.success(o.meta.msg),t.children=o.data;case 8:case"end":return a.stop()}}),a)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},setRightsDialog:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.rolesId=e.id,r.next=3,t.$http.get("rights/tree");case 3:if(a=r.sent,s=a.data,200===s.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error(s.meta.msg));case 7:t.setRightsList=s.data,t.getLeafKeys(e,t.defKeys),t.setRightsDialogVisible=!0;case 10:case"end":return r.stop()}}),r)})))()},setRightsClose:function(){this.defKeys=[],this.setRightsDialogVisible=!1},addRoleClose:function(){this.addRoleDialogVisible=!1,this.$refs.addRoleFormRef.resetFields()},editorRoleClose:function(){this.$refs.editorRoleFormRef.resetFields(),this.editorRoleDialogVisible=!1},addRole:function(){var e=this;this.$refs.addRoleFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("请输入合法的角色信息！！"));case 2:return t.next=4,e.$http.post("roles",e.addRoleForm);case 4:if(a=t.sent,s=a.data,201===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 8:e.$message.success(s.meta.msg),e.addRoleDialogVisible=!1,e.getRolesList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editorRoleDialog:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editorRoleDialogVisible=!0,r.next=3,t.$http.get("roles/".concat(e));case 3:if(a=r.sent,s=a.data,200===s.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error(s.meta.msg));case 7:t.editorRoleForm=s.data;case 8:case"end":return r.stop()}}),r)})))()},editorRole:function(){var e=this;this.$refs.editorRoleFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("请输入合法的角色信息！！"));case 2:return t.next=4,e.$http.put("roles/".concat(e.editorRoleForm.roleId),e.editorRoleForm);case 4:if(a=t.sent,s=a.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 8:e.$message.success(s.meta.msg),e.editorRoleDialogVisible=!1,e.getRolesList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},delRole:function(e){var t=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("roles/".concat(e));case 2:if(a=r.sent,s=a.data,200===s.meta.status){r.next=6;break}return r.abrupt("return",t.$message.error(s.meta.msg));case 6:t.$message.success(s.meta.msg),t.getRolesList();case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},setRights:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[].concat(Object(o["a"])(e.$refs.setRightsTreeRef.getCheckedKeys()),Object(o["a"])(e.$refs.setRightsTreeRef.getHalfCheckedKeys())),a=r.join(","),t.next=4,e.$http.post("roles/".concat(e.rolesId,"/rights"),{rids:a});case 4:if(s=t.sent,n=s.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),e.getRolesList(),e.setRightsDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})))()},getLeafKeys:function(e,t){var r=this;if(!e.children)return t.push(e.id);e.children.forEach((function(e){return r.getLeafKeys(e,t)}))}}},l=i,c=(r("eb66"),r("2877")),u=Object(c["a"])(l,a,s,!1,null,"50c2179c",null);t["default"]=u.exports},"3ca3":function(e,t,r){"use strict";var a=r("6547").charAt,s=r("69f3"),o=r("7dd0"),n="String Iterator",i=s.set,l=s.getterFor(n);o(String,"String",(function(e){i(this,{type:n,string:String(e),index:0})}),(function(){var e,t=l(this),r=t.string,s=t.index;return s>=r.length?{value:void 0,done:!0}:(e=a(r,s),t.index+=e.length,{value:e,done:!1})}))},"4df4":function(e,t,r){"use strict";var a=r("0366"),s=r("7b0b"),o=r("9bdd"),n=r("e95a"),i=r("50c4"),l=r("8418"),c=r("35a1");e.exports=function(e){var t,r,u,d,m,f,p=s(e),g="function"==typeof this?this:Array,b=arguments.length,h=b>1?arguments[1]:void 0,v=void 0!==h,R=c(p),y=0;if(v&&(h=a(h,b>2?arguments[2]:void 0,2)),void 0==R||g==Array&&n(R))for(t=i(p.length),r=new g(t);t>y;y++)f=v?h(p[y],y):p[y],l(r,y,f);else for(d=R.call(p),m=d.next,r=new g;!(u=m.call(d)).done;y++)f=v?o(d,h,[u.value,y],!0):u.value,l(r,y,f);return r.length=y,r}},"746f":function(e,t,r){var a=r("428f"),s=r("5135"),o=r("e538"),n=r("9bf2").f;e.exports=function(e){var t=a.Symbol||(a.Symbol={});s(t,e)||n(t,e,{value:o.f(e)})}},"9bdd":function(e,t,r){var a=r("825a"),s=r("2a62");e.exports=function(e,t,r,o){try{return o?t(a(r)[0],r[1]):t(r)}catch(n){throw s(e),n}}},a4d3:function(e,t,r){"use strict";var a=r("23e7"),s=r("da84"),o=r("d066"),n=r("c430"),i=r("83ab"),l=r("4930"),c=r("fdbf"),u=r("d039"),d=r("5135"),m=r("e8b5"),f=r("861d"),p=r("825a"),g=r("7b0b"),b=r("fc6a"),h=r("c04e"),v=r("5c6c"),R=r("7c73"),y=r("df75"),w=r("241c"),x=r("057f"),k=r("7418"),$=r("06cf"),F=r("9bf2"),U=r("d1e7"),_=r("9112"),D=r("6eeb"),S=r("5692"),L=r("f772"),O=r("d012"),j=r("90e3"),V=r("b622"),C=r("e538"),N=r("746f"),A=r("d44e"),P=r("69f3"),E=r("b727").forEach,z=L("hidden"),I="Symbol",T="prototype",q=V("toPrimitive"),K=P.set,B=P.getterFor(I),J=Object[T],M=s.Symbol,H=o("JSON","stringify"),Q=$.f,W=F.f,G=x.f,X=U.f,Y=S("symbols"),Z=S("op-symbols"),ee=S("string-to-symbol-registry"),te=S("symbol-to-string-registry"),re=S("wks"),ae=s.QObject,se=!ae||!ae[T]||!ae[T].findChild,oe=i&&u((function(){return 7!=R(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(e,t,r){var a=Q(J,t);a&&delete J[t],W(e,t,r),a&&e!==J&&W(J,t,a)}:W,ne=function(e,t){var r=Y[e]=R(M[T]);return K(r,{type:I,tag:e,description:t}),i||(r.description=t),r},ie=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof M},le=function(e,t,r){e===J&&le(Z,t,r),p(e);var a=h(t,!0);return p(r),d(Y,a)?(r.enumerable?(d(e,z)&&e[z][a]&&(e[z][a]=!1),r=R(r,{enumerable:v(0,!1)})):(d(e,z)||W(e,z,v(1,{})),e[z][a]=!0),oe(e,a,r)):W(e,a,r)},ce=function(e,t){p(e);var r=b(t),a=y(r).concat(pe(r));return E(a,(function(t){i&&!de.call(r,t)||le(e,t,r[t])})),e},ue=function(e,t){return void 0===t?R(e):ce(R(e),t)},de=function(e){var t=h(e,!0),r=X.call(this,t);return!(this===J&&d(Y,t)&&!d(Z,t))&&(!(r||!d(this,t)||!d(Y,t)||d(this,z)&&this[z][t])||r)},me=function(e,t){var r=b(e),a=h(t,!0);if(r!==J||!d(Y,a)||d(Z,a)){var s=Q(r,a);return!s||!d(Y,a)||d(r,z)&&r[z][a]||(s.enumerable=!0),s}},fe=function(e){var t=G(b(e)),r=[];return E(t,(function(e){d(Y,e)||d(O,e)||r.push(e)})),r},pe=function(e){var t=e===J,r=G(t?Z:b(e)),a=[];return E(r,(function(e){!d(Y,e)||t&&!d(J,e)||a.push(Y[e])})),a};if(l||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=j(e),r=function(e){this===J&&r.call(Z,e),d(this,z)&&d(this[z],t)&&(this[z][t]=!1),oe(this,t,v(1,e))};return i&&se&&oe(J,t,{configurable:!0,set:r}),ne(t,e)},D(M[T],"toString",(function(){return B(this).tag})),D(M,"withoutSetter",(function(e){return ne(j(e),e)})),U.f=de,F.f=le,$.f=me,w.f=x.f=fe,k.f=pe,C.f=function(e){return ne(V(e),e)},i&&(W(M[T],"description",{configurable:!0,get:function(){return B(this).description}}),n||D(J,"propertyIsEnumerable",de,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:M}),E(y(re),(function(e){N(e)})),a({target:I,stat:!0,forced:!l},{for:function(e){var t=String(e);if(d(ee,t))return ee[t];var r=M(t);return ee[t]=r,te[r]=t,r},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");if(d(te,e))return te[e]},useSetter:function(){se=!0},useSimple:function(){se=!1}}),a({target:"Object",stat:!0,forced:!l,sham:!i},{create:ue,defineProperty:le,defineProperties:ce,getOwnPropertyDescriptor:me}),a({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:fe,getOwnPropertySymbols:pe}),a({target:"Object",stat:!0,forced:u((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(g(e))}}),H){var ge=!l||u((function(){var e=M();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}));a({target:"JSON",stat:!0,forced:ge},{stringify:function(e,t,r){var a,s=[e],o=1;while(arguments.length>o)s.push(arguments[o++]);if(a=t,(f(t)||void 0!==e)&&!ie(e))return m(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!ie(t))return t}),s[1]=t,H.apply(null,s)}})}M[T][q]||_(M[T],q,M[T].valueOf),A(M,I),O[z]=!0},a630:function(e,t,r){var a=r("23e7"),s=r("4df4"),o=r("1c7e"),n=!o((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:n},{from:s})},a766:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/rights"}}},[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("权限列表")])],1),r("el-card",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightsList,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index",label:"序号"}}),r("el-table-column",{attrs:{prop:"authName",label:"权限名称"}}),r("el-table-column",{attrs:{prop:"path",label:"路径"}}),r("el-table-column",{attrs:{label:"权限等级"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.level?r("el-tag",[e._v("一级")]):"1"===t.row.level?r("el-tag",{attrs:{type:"success"}},[e._v("二级")]):r("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])})],1)],1)],1)},s=[],o=(r("96cf"),r("1da1")),n={data:function(){return{rightsList:[]}},created:function(){this.getRightsList()},methods:{getRightsList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rights/list");case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 6:e.rightsList=a.data;case 7:case"end":return t.stop()}}),t)})))()}}},i=n,l=r("2877"),c=Object(l["a"])(i,a,s,!1,null,null,null);t["default"]=c.exports},a9b4:function(e,t,r){},b0c0:function(e,t,r){var a=r("83ab"),s=r("9bf2").f,o=Function.prototype,n=o.toString,i=/^\s*function ([^ (]*)/,l="name";a&&!(l in o)&&s(o,l,{configurable:!0,get:function(){try{return n.call(this).match(i)[1]}catch(e){return""}}})},d28b:function(e,t,r){var a=r("746f");a("iterator")},ddb0:function(e,t,r){var a=r("da84"),s=r("fdbc"),o=r("e260"),n=r("9112"),i=r("b622"),l=i("iterator"),c=i("toStringTag"),u=o.values;for(var d in s){var m=a[d],f=m&&m.prototype;if(f){if(f[l]!==u)try{n(f,l,u)}catch(g){f[l]=u}if(f[c]||n(f,c,d),s[d])for(var p in o)if(f[p]!==o[p])try{n(f,p,o[p])}catch(g){f[p]=o[p]}}}},e01a:function(e,t,r){"use strict";var a=r("23e7"),s=r("83ab"),o=r("da84"),n=r("5135"),i=r("861d"),l=r("9bf2").f,c=r("e893"),u=o.Symbol;if(s&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(m,u);var f=m.prototype=u.prototype;f.constructor=m;var p=f.toString,g="Symbol(test)"==String(u("test")),b=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=p.call(e);if(n(d,e))return"";var r=g?t.slice(7,-1):t.replace(b,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:m})}},e538:function(e,t,r){var a=r("b622");t.f=a},eb66:function(e,t,r){"use strict";r("a9b4")},fb6a:function(e,t,r){"use strict";var a=r("23e7"),s=r("861d"),o=r("e8b5"),n=r("23cb"),i=r("50c4"),l=r("fc6a"),c=r("8418"),u=r("b622"),d=r("1dde"),m=r("ae40"),f=d("slice"),p=m("slice",{ACCESSORS:!0,0:0,1:2}),g=u("species"),b=[].slice,h=Math.max;a({target:"Array",proto:!0,forced:!f||!p},{slice:function(e,t){var r,a,u,d=l(this),m=i(d.length),f=n(e,m),p=n(void 0===t?m:t,m);if(o(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?s(r)&&(r=r[g],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return b.call(d,f,p);for(a=new(void 0===r?Array:r)(h(p-f,0)),u=0;f<p;f++,u++)f in d&&c(a,u,d[f]);return a.length=u,a}})}}]);
//# sourceMappingURL=Users_Rights_Roles.766fd740.js.map